#include <REGX52.H>
#include<intrins.h>
void Delay100us(void)	//@12.000MHz
{
	unsigned char data i;

	_nop_();
	i = 47;
	while (--i);
}

void Delay1ms(void)	//@12.000MHz
{
	unsigned char data i, j;

	i = 2;
	j = 239;
	do
	{
		while (--j);
	} while (--i);
}

unsigned char Num[]={0x3F,0x06,0x5B,0x4F, 0x86,0xcf,0x7D,0x87,0x7F,0x6F,0x7f};
void fun(unsigned char location,num){
	switch(location){
		case 1:P2_4=1;P2_3=1;P2_2=1;break;
		case 2:P2_4=1;P2_3=1;P2_2=0;break;
		case 3:P2_4=1;P2_3=0;P2_2=1;break;
		case 4:P2_4=1;P2_3=0;P2_2=0;break;
		case 5:P2_4=0;P2_3=1;P2_2=1;break;
		case 6:P2_4=0;P2_3=1;P2_2=0;break;
		case 7:P2_4=0;P2_3=0;P2_2=1;break;
		case 8:P2_4=0;P2_3=0;P2_2=0;break;
	}	
	P0=Num[num];
	Delay1ms();
	P0=0x00;

}
void main()
{
	while(1){
	fun(1,2);
		Delay100us();
	fun(2,0);//调用函数显示数字
	}
}
